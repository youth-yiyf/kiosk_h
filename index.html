<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Untitled</title>
  <link rel="stylesheet" href="./style.css">
  
  <link rel="manifest" href="manifest.json">

</head>
<body>
<!-- partial:index.partial.html -->
<div class="container">
  <div class="header">
    <button class="back-btn" onclick="goBack()" style="display:none;">←</button>
    <h1>🏠 흥덕청소년문화의집</h1>
    <p>시설 예약 시스템</p>
    <button class="home-btn" onclick="showScreen('main-screen')" style="display:none;">🏠</button>
  </div>

 <!-- 메인 화면 -->
  <div id="main-screen" class="screen active">
   <div class="welcome-overlay">
    <div class="welcome-image-container">
     <div class="welcome-screen">
       <div class="welcome-emoji">
  <img src="https://imgur.com/Ui18LaO.png" alt="웰컴 이모지" />
</div>
       <div class="welcome-text">용인특례시<br>흥덕청소년문화의집<br>방문을 환영합니다🍀</div>
     </div>
    </div>
    <div class="welcome-buttons">
      <button class="btn btn-primary" onclick="showScreen('user-info-screen')">🗓 시설 예약하기</button>
      <button class="btn btn-secondary" onclick="showScreen('status-screen')">🔍 예약 확인하기</button>
      <button class="btn btn-tertiary" onclick="showScreen('all-status-screen')">📊 전체 시설 예약 현황</button>
    </div>
   </div>
  </div>     

  <!-- 사용자 정보 입력 화면 -->
  <div id="user-info-screen" class="screen">
    <h2 style="margin: 70px 0 60px; text-align:center; color:#333; font-size: 2em;">
     <img src="https://i.imgur.com/Ui18LaO.png" alt="User Icon"
       style="width: 120px; height: 80px; vertical-align: middle; margin-right: 4px;">
  예약자 정보
</h2>
    <div class="form-group">
      <label for="user-name">이름</label>
      <input type="text" id="user-name" class="form-input" placeholder="이름을 입력하세요">
    </div>
    <div class="form-group">
      <label for="user-birth">생년월일</label>
      <input type="date" id="user-birth" class="form-input">
    </div>
    <div class="form-group">
      <label for="user-phone">전화번호</label>
      <input type="tel" id="user-phone" class="form-input" placeholder="010-0000-0000">
    </div>
    <div style="text-align: center; margin-top: 40px;">
    <button class="btn btn-primary" onclick="validateUserInfo()">다음</button>
  </div>
</div>

  <!-- 정보 확인 화면 -->
  <div id="user-info-confirm-screen" class="screen">
    <h2 style="text-align:center; margin:40px 0 30px;">입력하신 정보가 맞습니까?</h2>
    <div id="confirm-info-box" style="background:#f8f9fa; padding:25px; border-radius:15px; margin-bottom:30px; text-align:left; max-width:350px; margin-left:auto; margin-right:auto;">
      <!-- JS로 정보 표시 -->
    </div>
    <div style="text-align:center;">
      <button class="btn btn-primary" onclick="goToFacilityScreen()">예</button>
      <button class="btn btn-secondary" onclick="goBackToUserInfo()">아니오</button>
    </div>
  </div>

  <!-- 시설 선택 화면 -->
  <div id="facility-screen" class="screen">
    <h2 style="margin-bottom:30px; text-align:center; color:#333;">🎯 시설 선택</h2>
    <div class="facilities-grid">
      <div class="facility-card" onclick="selectFacility(this)">
        <span class="facility-emoji">🕹️</span>
        <div class="facility-name">닌텐도</div>
      </div>
      <div class="facility-card" onclick="selectFacility(this)">
        <span class="facility-emoji">🎮</span>
        <div class="facility-name">플레이스테이션</div>
      </div>
      <div class="facility-card" onclick="selectFacility(this)">
        <span class="facility-emoji">🎤</span>
        <div class="facility-name">노래방</div>
      </div>
      <div class="facility-card" onclick="selectFacility(this)">
        <span class="facility-emoji">🎲</span>
        <div class="facility-name">보드게임</div>
      </div>
      <div class="facility-card" onclick="selectFacility(this)">
        <span class="facility-emoji">💃🕺</span>
        <div class="facility-name">댄스연습실</div>
      </div>
      <div class="facility-card" onclick="selectFacility(this)">
        <span class="facility-emoji">📝</span>
        <div class="facility-name">강의실</div>
      </div>
    </div>
  </div>
 </div>
  
   <!-- 시설 번호 선택 화면 -->
  <div id="facility-number-screen" class="screen">
    <h2 style="margin-bottom:30px; text-align:center; color:#333;">🎯 이용 공간 선택</h2>
    <div class="number-grid">
      </div>
    <div style="text-align: center; margin-top: 40px;">
         <button class="btn btn-primary" onclick="showScreen('datetime-screen')">다음</button>
    </div>
  </div>

  <!-- 날짜/시간 선택 화면 -->
  <div id="datetime-screen" class="screen">
    <h2 style="margin-bottom:30px; text-align:center; color:#333;">📅 날짜 및 시간 선택</h2>
    <div class="today-date" id="today-date"></div>
    <div class="form-group">
      <label>⏰ 시간 선택!</label>
      <div class="time-slots">
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="09:00~10:00">09:00-10:00</div>
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="10:00~11:00">10:00-11:00</div>
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="11:00~12:00">11:00-12:00</div>
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="13:00~14:00">13:00-14:00</div>
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="14:00~15:00">14:00-15:00</div>
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="15:00~16:00">15:00-16:00</div>
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="16:00~17:00">16:00-17:00</div>
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="17:00~18:00">17:00-18:00</div>
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="18:00~19:00">18:00-19:00</div>
        <div class="time-slot" onclick="selectTimeSlot(this)" data-time="19:00~20:00">19:00-20:00</div>
      </div>
    </div>
    <div style="text-align: center; margin-top: 40px;">
    <button class="btn btn-primary" onclick="completeReservation()">예약완료</button>
  </div>
 </div>

<!-- 예약 검색 화면 -->
<div id="status-screen" class="screen">
  <h2 style="margin-bottom:30px; text-align:center; color:#333;">🔍 예약 검색</h2>
  
  <!-- 검색 폼 -->
  <div style="background:#f8f9fa; padding:25px; border-radius:15px; margin-bottom:30px;">
    <h3 style="margin-bottom:20px; color:#333; text-align:center;">예약 정보 검색</h3>
    <div class="form-group">
      <label for="search-name">이름</label>
      <input type="text" id="search-name" class="form-input" placeholder="이름을 입력하세요" style="margin: 0 auto; display: block;">
    </div>
    <div class="form-group">
      <label for="search-birth">생년월일</label>
      <input type="date" id="search-birth" class="form-input" style="margin: 0 auto; display: block;">
    </div>
    <div class="form-group">
      <label for="search-phone">전화번호</label>
      <input type="tel" id="search-phone" class="form-input" placeholder="010-0000-0000" style="margin: 0 auto; display: block;">
    </div>
    <div style="text-align: center; margin-top: 25px;">
      <button class="btn btn-primary" onclick="searchReservations()" style="margin-right: 10px;">🔍 검색</button>
      <br>
      <button class="btn btn-secondary" onclick="clearSearch()" style="margin-right: 10px;">🔄 초기화</button>
    </div>
  </div>
  
  <!-- 검색 결과 -->
  <div id="search-results" style="display:none;">
    <h3 style="margin-bottom:20px; color:#333; text-align:center;">검색 결과</h3>
    <div id="reservation-list"></div>
  </div>

  <!-- 관리자 기능 -->
  <div style="margin-top:30px; padding:10px; background:#f8f9fa; border-radius:15px;">
    <h3 style="margin-bottom:15px; color:#333; text-align:center;">관리자 기능</h3>
    <div style="display: flex; justify-content: space-between; gap: 10px;">
      <button class="btn-download" onclick="showDownloadModal()">📥 데이터 다운로드</button>
      <button class="btn-reset" onclick="showAdminModal()">🔄 예약초기화 (관리자)</button>
    </div>
  </div>
</div>

  <!-- 시설별 예약 현황 화면 -->
<div id="all-status-screen" class="screen">
  
  <!-- 시설 선택 섹션 -->
  <div id="status-facility-select-section" class="status-section active">
    <div style="text-align:center; margin-bottom:30px;">
      <p style="font-size:1.2em; color:#555; margin-bottom:10px;">현황을 조회할 시설을 선택해주세요</p>
      <p style="font-size:0.9em; color:#777;">특정 시설을 선택하거나 "전체 보기"를 선택하여 모든 시설의 현황을 확인할 수 있습니다</p>
    </div>
    
    <div class="facilities-grid">
      <div class="facility-card" onclick="selectStatusFacility(this)">
        <div class="facility-icon">🕹️</div>
        <div class="facility-name">닌텐도</div>
        <div class="facility-desc">
          1~8번<br>
          9번<br>
           <span class="special-seat">배려석</span>
        </div>
      </div>
      <div class="facility-card" onclick="selectStatusFacility(this)">
        <div class="facility-icon">🎮</div>
        <div class="facility-name">플레이스테이션</div>
        <div class="facility-desc">1~2번 기기</div>
      </div>
      <div class="facility-card" onclick="selectStatusFacility(this)">
        <div class="facility-icon">🎤</div>
        <div class="facility-name">노래방</div>
        <div class="facility-desc">1~2번 방</div>
      </div>
        <div class="facility-card" onclick="selectStatusFacility(this)">
        <div class="facility-icon">🎲</div>
        <div class="facility-name">보드게임</div>
        <div class="facility-desc">1~2번 방</div>
      </div>
<div class="facility-card" onclick="selectStatusFacility(this)">
  <div class="facility-icon">💃</div>
  <div class="facility-name">댄스연습실</div>
  <div class="facility-desc">단일 공간</div>
</div>
<div class="facility-card" onclick="selectStatusFacility(this)">
  <div class="facility-icon">📝</div>
  <div class="facility-name">강의실</div>
  <div class="facility-desc">단일 공간</div>
</div>
    </div>
    
    <!-- 전체 보기 버튼 -->
    <div style="text-align:center; margin-top:30px;">
      <button class="btn btn-primary" onclick="showAllFacilitiesStatus()" style="max-width:200px;">
        📊 전체 시설 현황 보기
      </button>
    </div>
  </div>

  <!-- 타임테이블 섹션 -->
  <div id="status-timetable-section" class="status-section">
    <!-- 헤더 영역 -->
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; padding:15px; background:#f8f9fa; border-radius:10px;">
      <div>
        <h3 id="selected-facility-title" style="margin:0; color:#333; font-size:1.3em;">📅 오늘의 예약 현황</h3>
        <p id="selected-facility-subtitle" style="margin:5px 0 0 0; color:#666; font-size:0.9em;">2024년 6월 28일 (금)</p>
      </div>
      <div style="display:flex; gap:10px;">
        <button class="btn-download" onclick="downloadAllStatusAsHTML()" style="padding:8px 16px; font-size:0.9em;">
          📊 현황표 다운로드
        </button>
      </div>
    </div>
    
    <!-- 타임테이블 컨테이너 -->
    <div class="status-grid">
      <!-- JavaScript로 동적 생성됨 -->
    </div>
    
    <!-- 범례 -->
    <div style="margin-top:20px; padding:15px; background:#f8f9fa; border-radius:10px;">
      <h4 style="margin:0 0 10px 0; color:#333;">✅ 예약했어요 ✅</h4>
      <div style="display:flex; gap:20px; flex-wrap:wrap;">
        <div style="display:flex; align-items:center; gap:8px;">
          <div style="width:20px; height:20px; border:2px solid #ff8c00; border-radius:4px; background:#ff8c00;"></div>
          <span style="font-size:1em;" font-weight:bold;">예약됨</span>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- 예약 완료 화면 -->
  <div id="success-screen" class="screen">
    <div class="welcome-screen">
     <div class="welcome-emoji success-emoji">✅</div>
      <div class="welcome-text">예약이 완료되었습니다!</div>
      <div style="background:#f8f9fa; padding:20px; border-radius:15px; margin-bottom:30px; text-align:left;">>
      </div>
      <button class="btn btn-primary" onclick="showScreen('main-screen')">메인으로 돌아가기</button>
    </div>
  </div>
<!-- partial -->
  <script  src="./script.js"></script>

  <!-- 관리자 비밀번호 입력 모달 -->
<div id="admin-modal" style="display:none; position:fixed; bottom:20px; right:20px; background:white; padding:20px; border-radius:12px; box-shadow:0 0 15px rgba(0,0,0,0.2); z-index:999;">
  <h3>🔐 관리자 비밀번호</h3>
  <input type="password" id="admin-password" maxlength="6" placeholder="숫자 6자리" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ccc; border-radius:8px;">
  <div style="display:flex; justify-content:space-between; margin-top:10px;">
    <button onclick="verifyAdminPassword()" class="btn btn-primary" style="width:48%;">확인</button>
    <button onclick="changeAdminPasswordPrompt()" class="btn btn-secondary" style="width:48%;">비밀번호 변경</button>
  </div>
</div>
  
</body>
</html>

<!-- 다운로드 옵션 선택 모달 (기존 관리자 모달 다음에 추가) -->
<div id="download-modal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:25px; border-radius:15px; box-shadow:0 0 20px rgba(0,0,0,0.3); z-index:1000; min-width:300px;">
  <h3 style="text-align:center; margin-bottom:20px; color:#333;">📥 다운로드 형식 선택</h3>
  
  <div style="display:flex; flex-direction:column; gap:12px;">
    <button onclick="downloadAsExcel(); hideDownloadModal();" class="btn btn-primary" style="width:100%; padding:20px 12px;">
      📊 Excel 파일 (.xls)
    </button>
    <button onclick="downloadAsText(); hideDownloadModal();" class="btn btn-tertiary" style="width:100%; padding:20px 12px;">
      📝 텍스트 파일 (.txt)
    </button>
    
  </div>
  
  <div style="text-align:center; margin-top:15px;">
    <button onclick="hideDownloadModal()" style="background:#dc3545; color:white; border:none; padding:8px 16px; border-radius:8px; cursor:pointer;">
      취소
    </button>
  </div>
</div>

<!-- 모달 배경 오버레이 (다운로드 모달용) -->
<div id="download-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:999;" onclick="hideDownloadModal()"></div>

<script src="./script.js"></script>

<!-- Firebase SDK (firebase-app, firebase-database) -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<!-- Firebase 설정 파일 -->
<script src="firebase-config.js"></script>

<!-- 예약 기능 로직 -->
<script src="app.js"></script>

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('service-worker.js');
    });
  }
</script>
</body>
</html>

